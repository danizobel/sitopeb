<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ordine Confermato - Peter Bun</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; font-family: 'Poppins', sans-serif; }
        body { 
            background: linear-gradient(135deg, #1a0f0f, #3e2723); 
            color: #f8f1e7; display: flex; flex-direction: column; 
            align-items: center; justify-content: center; min-height: 100vh; padding: 20px; text-align: center;
        }
        .card {
            background: rgba(62, 39, 35, 0.9); backdrop-filter: blur(10px);
            padding: 40px 25px; border-radius: 24px; border: 1px solid rgba(255, 193, 7, 0.3);
            box-shadow: 0 15px 35px rgba(0,0,0,0.6); width: 100%; max-width: 400px;
            animation: slideUp 0.5s ease-out;
        }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .icon-circle {
            width: 80px; height: 80px; background: rgba(37, 211, 102, 0.1);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            margin: 0 auto 20px; border: 2px solid #25D366;
        }
        .icon-circle i { font-size: 2.5rem; color: #25D366; }
        h1 { font-size: 1.8rem; color: #ffc107; margin-bottom: 15px; font-weight: 800; line-height: 1.2; }
        p { font-size: 1rem; color: #bcaaa4; margin-bottom: 30px; line-height: 1.6; }
        .highlight { color: #f8f1e7; font-weight: 600; }
        
        .btn-whatsapp {
            background: linear-gradient(45deg, #25D366, #128C7E); color: white;
            border: none; padding: 18px 20px; border-radius: 50px; font-size: 1.1rem; 
            font-weight: 800; cursor: pointer; display: flex; justify-content: center; 
            align-items: center; gap: 10px; width: 100%; text-decoration: none;
            box-shadow: 0 8px 20px rgba(37, 211, 102, 0.3); transition: transform 0.2s;
            animation: pulse 2s infinite;
        }
        .btn-whatsapp:active { transform: scale(0.96); }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.5); }
            70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
    </style>
</head>
<body>

    <div class="card">
        <div class="icon-circle">
            <i class="fa-solid fa-check"></i>
        </div>
        <h1>PAGAMENTO RIUSCITO!</h1>
        <p>Il tuo ordine è stato saldato con successo.<br><br>
        <span class="highlight">Fai l'ultimo passo:</span> invia l'ordine alla cucina su WhatsApp per far avviare la preparazione!</p>
        
        <button class="btn-whatsapp" onclick="sendFinalWhatsApp()">
            <i class="fa-brands fa-whatsapp fa-xl"></i> AVVISA LA CUCINA
        </button>
    </div>

    <script>
        function sendFinalWhatsApp() {
            let orderMessage = localStorage.getItem('peterbun_order_message');
            
            if (!orderMessage) {
                alert("Non abbiamo trovato i dettagli dell'ordine in memoria. Chiama direttamente il locale per confermare!");
                return;
            }

            // Aggiungiamo il timbro e corretto il nome del gateway in SumUp!
            let finalMessage = "✅ *ORDINE PAGATO ONLINE (SumUp)*%0A%0A" + orderMessage;
            
            // INSERISCI QUI IL NUMERO DI PETER BUN
            const phoneNumber = "393203665370"; 
            
            window.location.href = `https://wa.me/${phoneNumber}?text=${finalMessage}`;
            
            // Opzionale: decommenta la riga sotto se vuoi svuotare la memoria dopo l'invio
            localStorage.removeItem('peterbun_order_message');
        }
    </script>

</body>
</html>